# Отчет по разработке многопоточной программы для кодирования текста с использованием шифра

## 1. Введение

Целью данной программы является разработка многопоточного консольного приложения для шифрования текста с использованием шифра "пляшущих человечков". В программе каждый поток кодирует фрагмент исходного текста, и затем фрагменты упорядочиваются и выводятся в итоговом виде.

Программа использует один из методов синхронизации потоков — мьютексы, чтобы избежать гонок данных при записи в общий список фрагментов. С помощью этого метода можно гарантировать, что каждый поток будет безопасно добавлять свои результаты в общий контейнер.

## 2. Сценарий работы программы

Сценарий работы программы отражает процесс кодирования текста, при котором каждый поток получает свою часть текста для кодирования и выполняет это действие параллельно с другими потоками. Все потоки работают одновременно и независимо, но в конце их результаты (закодированные фрагменты текста) собираются в одну цепочку, при этом каждый фрагмент сохраняет свой порядок, и в конце они упорядочиваются.

### 2.1 Субъекты и объекты

1. **Субъект: Потоки**
    - Каждый поток выполняет шифрование фрагмента текста. Потоки работают параллельно и независимо друг от друга.

2. **Объект: Текст**
    - Текст представляет собой строку символов, которая будет разделена на несколько фрагментов. Каждый поток будет работать с одним фрагментом текста и шифровать его.

3. **Объект: Кодовая таблица**
    - Таблица кодов, где каждой букве латинского алфавита и пробелу соответствует уникальная кодировка (числовой код).

4. **Объект: Фрагменты**
    - Каждый фрагмент текста после кодирования превращается в строку числовых значений, соответствующих буквам и пробелам. Каждый фрагмент сохраняет свой порядковый номер, чтобы в конце собрать все фрагменты в правильном порядке.

### 2.2 Процесс шифрования

1. Исходный текст (введенный пользователем или сгенерированный случайным образом) разбивается на несколько фрагментов в зависимости от числа потоков.
2. Каждый поток получает свою часть текста и шифрует его, используя кодовую таблицу.
3. После завершения работы каждый поток добавляет результат в общий список фрагментов.
4. Как только все потоки завершили выполнение, результаты сортируются по их индексам и выводится итоговый закодированный текст.

## 3. Модель параллельных вычислений

В программе используется многопоточность для параллельного шифрования текста. Каждый поток выполняет операцию шифрования для своей части текста. Потоки работают асинхронно, что позволяет ускорить процесс шифрования для больших текстов.

- Каждый поток получает фрагмент текста.
- Поток шифрует фрагмент с использованием кодовой таблицы.
- После завершения работы поток добавляет закодированный фрагмент в общий список.
- Для синхронизации работы потоков используется мьютекс, который защищает доступ к общему ресурсу — списку фрагментов.
- После завершения всех потоков фрагменты сортируются по их индексам.

Это решение подходит для параллельной обработки данных, где результаты могут быть собраны и упорядочены после завершения всех вычислений.

## 4. Входные данные программы

Программа принимает на вход:
1. **Текст для шифрования** — это может быть строка, введенная пользователем или случайно сгенерированный текст.
2. **Число потоков** — число, которое задает количество фрагментов текста, на которые будет разделен исходный текст.

### Диапазоны входных данных:
- Исходный текст может быть любой строкой, состоящей из латинских букв и пробелов.
- Число потоков варьируется от 1 до N, где N — количество символов в тексте (чтобы избежать ситуаций, когда число потоков больше, чем количество фрагментов).

### Генерация случайных данных:
Программа может сгенерировать случайный текст с использованием диапазона символов:
- Латинские буквы нижнего регистра
- Пробел

Длина случайно сгенерированного текста может варьироваться от 5 до 100 символов.

## 5. Используемые генераторы случайных чисел

Для генерации случайных данных применяется генератор случайных чисел `std::mt19937` (Мерсенн Твистер). Он является качественным генератором случайных чисел и используется для генерации случайных символов текста.

Диапазоны генераторов:
- Символы для случайного текста выбираются из набора: "abcdefghijklmnopqrstuvwxyz ".
- Длина текста генерируется случайным образом в пределах от 5 до 100 символов.

## 6. Описание работы программы

Программа запрашивает у пользователя ввод исходного текста и числа потоков через командную строку при запуске программы. После этого программа делит текст на несколько фрагментов и создает соответствующее количество потоков для шифрования этих фрагментов.

1. Программа принимает ввод от пользователя через командную строку:
    - Ввод исходного текста.
    - Ввод количества потоков.

2. Программа генерирует случайный текст, если пользователь выбирает такую опцию через командную строку.

3. Исходный текст делится на несколько фрагментов, которые передаются потокам для кодирования.

4. Каждый поток кодирует свой фрагмент и добавляет его в общий список.

5. После завершения работы всех потоков, фрагменты сортируются по их индексам.

6. Программа выводит закодированные фрагменты и итоговый результат.

## 7. Примеры тестов

### Пример 1: Ввод текста пользователем
**Входные данные:**
```
timur@MacBook-Air-timur-2 IHW4 %  g++ -std=c++17 -o main main.cpp -lpthread

timur@MacBook-Air-timur-2 IHW4 % ./main "test test test" 3
```
**Вывод программы:**
```
Закодирован фрагмент 0: 20 05 19 20 
Закодирован фрагмент 1: 00 20 05 19 
Закодирован фрагмент 2: 20 00 20 05 19 20 

Итоговый закодированный текст: 20 05 19 20 00 20 05 19 20 00 20 05 19 20 
```
### Пример 2: Рандомная генерация текста
**Входные данные:**
```
timur@MacBook-Air-timur-2 IHW4 %  g++ -std=c++17 -o main main.cpp -lpthread

timur@MacBook-Air-timur-2 IHW4 % ./main random 5
```
**Вывод программы:**
```
Сгенерированный текст: kllfycft tkzmwad
Закодирован фрагмент 0: 11 12 12 
Закодирован фрагмент 1: 06 25 03 
Закодирован фрагмент 2: 06 20 00 
Закодирован фрагмент 3: 20 11 26 
Закодирован фрагмент 4: 13 23 01 04 

Итоговый закодированный текст: 11 12 12 06 25 03 06 20 00 20 11 26 13 23 01 04 
```